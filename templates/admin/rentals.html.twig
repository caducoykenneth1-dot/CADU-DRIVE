{% extends 'admin/layout.html.twig' %}

{% block admin_title %}Rentals{% endblock %}

{% block admin_content %}
    <section id="rentals" class="dashboard-section" data-dashboard-section>
        <div class="section-header">
            <div>
                <h2>Rental Timeline</h2>
                <p>Latest bookings with quick visibility into status and key dates.</p>
            </div>
            <div class="section-actions">
                <a href="{{ path('app_rental_index') }}" class="section-link">
                    <span class="bi bi-calendar-event"></span>
                    View All Rentals
                </a>
            </div>
        </div>

        {% if rentals is defined and rentals is not empty %}
            <div class="timeline">
                {% set nowDate = date() %}
                {% for rental in rentals %}
                    {% set isActive = rental.startDate <= nowDate and rental.endDate >= nowDate %}
                    {% set isUpcoming = rental.startDate > nowDate %}
                    <div class="timeline-item">
                        <span class="timeline-dot"></span>
                        <div class="timeline-content">
                            <h4>{{ rental.car ? rental.car.make ~ ' ' ~ rental.car.model : 'Vehicle' }}</h4>
                            <p>
                                <span class="bi bi-person"></span>
                                {{ rental.customer ? rental.customer.displayName : 'Customer' }}
                            </p>
                            <div class="meta">
                                <span>
                                    <span class="bi bi-clock"></span>
                                    {{ rental.startDate|date('M d, Y') }} to {{ rental.endDate|date('M d, Y') }}
                                </span>
                                <span>
                                    {% if isActive %}
                                        <span class="status-badge is-green">Active</span>
                                    {% elseif isUpcoming %}
                                        <span class="status-badge is-amber">Upcoming</span>
                                    {% else %}
                                        <span class="status-badge is-slate">Completed</span>
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-placeholder">
                <strong>No rentals recorded</strong>
                Once bookings are created they will appear on the timeline.
            </div>
        {% endif %}
    </section>
{% endblock %}
