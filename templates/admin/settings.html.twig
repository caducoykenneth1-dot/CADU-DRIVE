{% extends 'admin/layout.html.twig' %}

{% block admin_title %}Settings{% endblock %}

{% block admin_content %}
    <section class="px-4 py-6">
        <div class="max-w-4xl mx-auto">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-100 mb-2">MVP Settings</h1>
                <p class="text-sm text-gray-400">Configure essential system, financial, booking, and email settings for your car rental platform.</p>
            </div>

            {% if app.flashes %}
                {% for label, messages in app.flashes %}
                    {% for message in messages %}
                        <div class="mb-4 p-4 rounded-lg {% if label == 'success' %}bg-green-900/20 border border-green-700 text-green-300{% else %}bg-red-900/20 border border-red-700 text-red-300{% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endfor %}
            {% endif %}

            {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'space-y-8'}}) }}

            {# System & Status Settings #}
            <fieldset class="customer-card">
                <legend class="text-lg font-semibold text-gray-100 mb-4 pb-3 border-b border-gray-600">‚öôÔ∏è System & Status</legend>
                <div class="space-y-4">
                    <div>
                        {{ form_label(form.SYSTEM_MAINTENANCE_MODE) }}
                        <div class="mt-2">
                            {{ form_widget(form.SYSTEM_MAINTENANCE_MODE, {
                                'attr': {'class': 'w-4 h-4 bg-gray-600 border border-gray-500 rounded focus:ring-indigo-500 cursor-pointer'}
                            }) }}
                            <span class="ml-2 text-sm text-gray-400">{{ form_help(form.SYSTEM_MAINTENANCE_MODE) }}</span>
                        </div>
                    </div>
                    <div>
                        {{ form_label(form.SYSTEM_DEFAULT_TIMEZONE) }}
                        {{ form_widget(form.SYSTEM_DEFAULT_TIMEZONE) }}
                    </div>
                </div>
            </fieldset>

            {# Financial Settings #}
            <fieldset class="customer-card">
                <legend class="text-lg font-semibold text-gray-100 mb-4 pb-3 border-b border-gray-600">üí∞ Financial</legend>
                <div class="space-y-4">
                    <div>
                        {{ form_label(form.FINANCE_CURRENCY_SYMBOL) }}
                        {{ form_widget(form.FINANCE_CURRENCY_SYMBOL) }}
                    </div>
                    <div>
                        {{ form_label(form.FINANCE_TAX_RATE_PERCENT) }}
                        {{ form_widget(form.FINANCE_TAX_RATE_PERCENT) }}
                    </div>
                    <div>
                        {{ form_label(form.LATE_RETURN_FEE_HOURLY) }}
                        {{ form_widget(form.LATE_RETURN_FEE_HOURLY) }}
                    </div>
                </div>
            </fieldset>

            {# Booking Logic Settings #}
            <fieldset class="customer-card">
                <legend class="text-lg font-semibold text-gray-100 mb-4 pb-3 border-b border-gray-600">üìÖ Booking Logic</legend>
                <div class="space-y-4">
                    <div>
                        {{ form_label(form.BOOKING_MIN_PERIOD_HOURS) }}
                        {{ form_widget(form.BOOKING_MIN_PERIOD_HOURS) }}
                    </div>
                    <div>
                        {{ form_label(form.RENTAL_BUFFER_HOURS) }}
                        {{ form_widget(form.RENTAL_BUFFER_HOURS) }}
                    </div>
                    <div>
                        {{ form_label(form.RENTAL_ADVANCE_NOTICE_HOURS) }}
                        {{ form_widget(form.RENTAL_ADVANCE_NOTICE_HOURS) }}
                    </div>
                </div>
            </fieldset>

            {# Email Settings #}
            <fieldset class="customer-card">
                <legend class="text-lg font-semibold text-gray-100 mb-4 pb-3 border-b border-gray-600">üìß Email</legend>
                <div class="space-y-4">
                    <div>
                        {{ form_label(form.EMAIL_SENDER_ADDRESS) }}
                        {{ form_widget(form.EMAIL_SENDER_ADDRESS) }}
                    </div>
                    <div>
                        {{ form_label(form.EMAIL_ADMIN_ALERT_ADDRESS) }}
                        {{ form_widget(form.EMAIL_ADMIN_ALERT_ADDRESS) }}
                    </div>
                </div>
            </fieldset>

            <div class="flex gap-3 pt-4">
                {{ form_widget(form.submit) }}
                <a href="{{ path('app_admin_dashboard') }}" class="px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition">Cancel</a>
            </div>

            {{ form_end(form) }}
        </div>
    </section>
{% endblock %}